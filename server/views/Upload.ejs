<!DOCTYPE html>
<html>
<head>
  <title>Music Dashboard - Uploaded Songs</title>
</head>
<body style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f4f8; margin: 0; padding: 30px;">

  <h1 style="text-align: center; color: #2c3e50; margin-bottom: 40px;">ðŸŽµ Uploaded Songs Dashboard</h1>

  <table style="width: 95%; margin: auto; border-collapse: collapse; background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden;">
    <thead>
      <tr style="background-color: #f9fafb; color: #333; font-weight: 600;">
        <th style="padding: 14px;">Name</th>
        <th style="padding: 14px;">User Image</th>
        <th style="padding: 14px;">Description</th>
        <th style="padding: 14px;">Audio</th>
        <th style="padding: 14px;">Status</th>
        <th style="padding: 14px;">Approve</th>
        <th style="padding: 14px;">Delete</th>
      </tr>
    </thead>
    <tbody>
      <% 
        function getCleanPath(path) {
          if (!path) return '';
          return path.replace(/^uploads[\\/]/, '').replace(/\\/g, '/');
        }
      %>
      <% songs.forEach(song => { %>
        <tr style="border-bottom: 1px solid #eee;">
          <td style="padding: 12px; color: #333;"><%= song.name %></td>
          <td style="padding: 12px;">
            <img 
              src="/uploads/<%= getCleanPath(song.image) %>" 
              alt="User Image" 
              width="80" height="80" 
              style="border-radius: 6px; object-fit: cover; border: 1px solid #ddd;"
              onerror="this.onerror=null; this.src='/placeholder.jpg';" 
            />
          </td>
          <td style="padding: 12px; color: #555;"><%= song.line %></td>
          <td style="padding: 12px;">
            <audio controls style="width: 150px;">
              <source src="/uploads/<%= getCleanPath(song.audio) %>" type="audio/mpeg" />
              Your browser does not support the audio element.
            </audio>
          </td>
          <td style="padding: 12px;">
            <span style="padding: 6px 12px; border-radius: 4px; font-weight: 600; background-color: <%= song.status === 'approved' ? '#2ecc71' : '#f39c12' %>; color: #fff;">
              <%= song.status %>
            </span>
          </td>
          <td style="padding: 12px;">
            <% if(song.status !== 'approved') { %>
              <button 
                onclick="approve('<%= song._id %>')" 
                style="padding: 8px 14px; background-color: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;"
              >
                Approve
              </button>
            <% } else { %>
              <span style="color: #27ae60; font-weight: bold;">âœ” Approved</span>
            <% } %>
          </td>
          <td style="padding: 12px;">
            <button 
              onclick="remove('<%= song._id %>')" 
              style="padding: 8px 14px; background-color: #e74c3c; color: white; border: none; border-radius: 4px; cursor: pointer;"
            >
              Delete
            </button>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <script>
    async function approve(id) {
      const res = await fetch(`/dashboard/music/approve/${id}`, { method: 'PUT' });
      if (res.ok) location.reload();
      else alert('Failed to approve');
    }

    async function remove(id) {
      const res = await fetch(`/dashboard/music/delete/${id}`, { method: 'DELETE' });
      if (res.ok) location.reload();
      else alert('Failed to delete');
    }
  </script>
</body>
</html>




<!-- <!DOCTYPE html>
<html>
<head>
  <title>Music Dashboard - Uploaded Songs</title>
</head>
<body>
  <h1>Music Dashboard - Uploaded Songs</h1>
  <table border="1" cellpadding="10" cellspacing="0">
    <thead>
      <tr>
        <th>Name</th>
        <th>User Image</th>
        <th>Description</th>
        <th>Audio</th>
        <th>Status</th>
        <th>Approve</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <% 
        // Helper function to fix slashes and remove leading uploads/
        function getCleanPath(path) {
          if (!path) return '';
          return path.replace(/^uploads[\\/]/, '').replace(/\\/g, '/');
        }
      %>
      <% songs.forEach(song => { %>
      <tr>
        <td><%= song.name %></td>
        <td>
          <img 
            src="/uploads/<%= getCleanPath(song.image) %>" 
            alt="User Image" 
            width="100" 
            onerror="this.onerror=null; this.src='/placeholder.jpg';" 
          />
        </td>
        <td><%= song.line %></td>
        <td>
          <audio controls>
            <source src="/uploads/<%= getCleanPath(song.audio) %>" type="audio/mpeg" />
            Your browser does not support audio element.
          </audio>
        </td>
        <td><%= song.status %></td>
        <td>
          <% if(song.status !== 'approved') { %>
            <button onclick="approve('<%= song._id %>')">Approve</button>
          <% } else { %>
            Approved
          <% } %>
        </td>
        <td>
          <button onclick="remove('<%= song._id %>')">Delete</button>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>

  <script>
    async function approve(id) {
      const res = await fetch(`/dashboard/music/approve/${id}`, { method: 'PUT' });
      if (res.ok) location.reload();
      else alert('Failed to approve');
    }

    async function remove(id) {
      const res = await fetch(`/dashboard/music/delete/${id}`, { method: 'DELETE' });
      if (res.ok) location.reload();
      else alert('Failed to delete');
    }
  </script>
</body>
</html> that is make better design   -->